<html>
<head>
<title>CastRoller iOS</title>
<link type="text/css" rel="stylesheet" href="common.css"/>ÃŸ
<style type="text/css">
	
	#nobbies li{
		background: url(nobbies.png) 0px -15px no-repeat;
		width: 15px;
		height: 15px;
		}
	
	#nobbies li.active{
		background: url(nobbies.png) 0px 0px no-repeat;
		width: 15px;
		height: 15px;
		}
	
	#featured li{
		display: none;
		height: 320px;
		overflow: hidden;
	}
	
	#channels ul{
		list-style: none;
		height: 90px;
		width: 100%;
		overflow-x: scroll;
		overflow-y: hidden;
		
	}
	
	#channels ul li{
		float: left;
	
	}
	
	#channels a.channelImage{
		width: 180px;
		height: 90px;
	}
	
</style>

<script src="jquery.min.js" type="text/javascript"></script>
<script src="jquery.tmpl.min.js" type="text/javascript"></script>
<script src="common.js" type="text/javascript"></script>
	<script id="featuredTemplate" type="text/x-jquery-tmpl">
		<li style='background: url(${ImageUrl})'  podcastId='${Id}'>
			<div>
				<h2>Featured</h2>
				<h1>${Name}</h1>
				<p>${Description}</p>
				<p>Button</p>
			</div>
		</li>
	</script>
	
		<script id="channelsTemplate" type="text/x-jquery-tmpl">
		<li>
			<a href="channel.html?cid=${Id}" class="channelImage"><img src='${ImageUrl}' alt='${Name}'/></a>
			<ul channel="${Id}">
			</ul>
			<br class="clear"/>
		</li>
	</script>
	
	<script id="episodeThumbsTemplate" type="text/x-jquery-tmpl">
      	<li>
             	<a href='episode.html?eid=${Id}'>
                 	<img src="${LinkUrl}" alt="${Name}"/>
                 	<h2>${Name}</h2>      
           	</a>
          </li>
	</script>
	
	
	
<script type="text/javascript">
function displayChannel(channelId)
{
	  var url = "http://api.castroller.com/v1.svc/GetChannelEpisodeImages?channelId=" + channelId + "&$format=json&$callback=?";
  

		$.getJSON(url, null, function(data)
			{
var resized = resizeImages(data.d,160,90);

var match = $('ul[channel="' + channelId + '"]');

$("#episodeThumbsTemplate").tmpl(resized).appendTo(match);
				
			}
			);
}


$(function(){

	var podcastsUrl = "http://api.castroller.com/v1.svc/GetFeaturedPodcasts?$format=json&$callback=?";
	
	
	
	$.getJSON(podcastsUrl, null, function(data){
	
		$(data.d).each(function(){
			
			$('#nobbies').append("<li podcastId='" + this.Id + "'>&nbsp;</li>");
			
			var newImage = resizeImage( this.ImageUrl, 1024, 1024 ); 
			
			
			this.ImageUrl = newImage;
			
			
	});
	
	
		$('#featuredTemplate').tmpl(data.d).appendTo("#featured");
		
		$('#featured li:first').show();
		$('#nobbies li:first').addClass("active");
		
		$('#nobbies li').click(function(){
			var podcastId = $(this).attr('podcastId');
			
			$('#featured li').hide();
			$('#nobbies li').removeClass('active');
			$(this).addClass("active");
			$("#featured li[podcastId='" + podcastId + "']").show();
		});
	
	});
	
	
	var url = "http://api.castroller.com/v1.svc/Channels?$orderby=FeaturedLevel%20desc&$top=6&$format=json&$callback=?";

	$.getJSON(url, null, function(data){
		$(data.d).each(function(){
			
			var newImage = resizeImage( this.ImageUrl, 180, 90 ); 
			
			
			this.ImageUrl = newImage;
			
			
	});
	
		$("#channelsTemplate").tmpl(data.d).appendTo("#channels");
		$('#channels li ul').each(function(){
			var channelId = $(this).attr("channel");
			displayChannel(channelId);
		});
	});
	

	
});



</script>
</head>
<body>
John's edit
<ul id="featured"></ul>
<ul id="nobbies">
</ul>

<ul id="tabs">
<li>Featured</li>
<li>New</li>
<li>Popular</li>
</ul>
<ul id="channels"></ul>

</body>
</html>